var board=function(){function e(){var e=$(this),a=e.attr("class");"attacker"==a?g?(g.attr("class","attacker"),g=null):(e.attr("class","attacker-select"),g=e):g&&("empty"==a?(google_apis.player_move(g.attr("id"),e.attr("id")),g=null):(g.attr("class","attacker"),g=null))}function a(){c.on("click",".row > div > div",e),google_apis.new_game(),r.hide()}function n(e){return 2==e||3==e?(2==e?(r.append("Player won!"),r.addClass("attacker-header")):(r.addClass("defender-header"),r.append("AI won!")),c.off(),r.removeClass("hidden"),!0):!1}function o(){c=$("#board");for(var a="",n=0;s>n;n++){for(var o="<div class='row'>",t=0;u>t;t++)o+="<div><div data-val='0' class='empty' id='"+n+","+t+"'></div></div>";o+="</div>",a+=o}c.append(a),c.on("click",".row > div > div",e)}function i(e,a,n,o){var i=document.getElementById(a),l=$(i);l.attr("class",m[0]);var c=document.getElementById(n),r=$(c);if(r.attr("class",m[e]),o&&o[0])for(var d=0;d<o.length;d++){f=o[d][0],t=o[d][1],console.log(f);var s=document.getElementById(f+","+t),u=$(s);u.attr("class",m[0])}}function l(e){e=e;for(var a=0;a<e.length;a++)for(var n=e[a].length,o=0;n>o;o++){var t=e[a][o],i=document.getElementById(a+","+o),l=$(i);l.attr("class",m[t])}}var c=$("#board"),r=$("#board_header"),d=$("#new_game");const s=9,u=9;var g=null;const m=["empty","attacker","defender","king"];return d.on("click",a),{empty_board:o,new_board:l,move:i,game_end:n}}(),dialogs=function(){function e(){d.showModal()}function a(){s.showModal()}function n(){u.showModal()}function o(){d.close()}function t(){s.close()}function i(){u.close()}var l=$("#how"),c=$("#history"),r=$("#about"),d=document.getElementById("how-dialog"),s=document.getElementById("history-dialog"),u=document.getElementById("about-dialog");l.on("click",e),c.on("click",a),r.on("click",n),d.querySelector(".close").addEventListener("click",o),s.querySelector(".close").addEventListener("click",t),u.querySelector(".close").addEventListener("click",i)}(),google_apis=function(){function e(){gapi.client.hnefatafl.new_game().execute(function(e){t=e.key,board.new_board(JSON.parse(e.board)),o()})}function a(){gapi.client.hnefatafl.last_player_game().execute(function(a){if(console.log(a),404==a.code)e();else{t=a.key,board.new_board(JSON.parse(a.board));var n=parseInt(a.state);board.game_end(n)||1==n&&o()}})}function n(e,a){var n=e.split(","),i=a.split(",");gapi.client.hnefatafl.player_move({game_key:t,origin_row:n[0],origin_column:n[1],destination_row:i[0],destination_column:i[1]}).execute(function(e){console.log(e),board.move(e.origin_value,e.origin,e.destination,"[]"!=e.captures?JSON.parse(e.captures.replace("(","[").replace(")","]")):null),board.game_end(parseInt(e.game_state))||o()})}function o(){gapi.client.hnefatafl.ai_move({game_key:t}).execute(function(e){console.log(e),board.move(e.origin_value,e.origin,e.destination,"[]"!=e.captures?JSON.parse(e.captures.replace("(","[").replace(")","]")):null),board.game_end(parseInt(e.game_state))})}var t=null;return{new_game:e,player_move:n,ai_move:o,last_player_game:a}}(),google_auth=function(){function e(){gapi.client.load("oauth2","v2"),gapi.client.load("hnefatafl","v1",a,i)}function a(){n(immediate=!0),setTimeout(profile.enableLogin(),2e3)}function n(e){gapi.auth.authorize({client_id:"314272160250-ucrqg44c1oj9knlrfatqvqf1b3pm9819.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email",immediate:e},t)}function o(){return l}function t(e){gapi.client.oauth2.userinfo.get().execute(function(e){e.code||(profile.setLoggedIn(e.picture,e.name),l=!0,google_apis.last_player_game())})}const i="http://localhost:8080/_ah/api";var l=!1;return{loadModules:e,isAuthed:o,signin:n}}(),profile=function(){function e(){o.on("click",a),console.log("enabled"),o.removeClass("hidden")}function a(){console.log("clik"),google_auth.signin(immediate=!1)}function n(e,a){console.log(a),t.html(a),t.removeClass("hidden"),o.addClass("hidden")}var o=$("#login"),t=$("#name");return{enableLogin:e,setLoggedIn:n}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvYXJkLmpzIiwiZGlhbG9ncy5qcyIsImdvb2dsZV9hcGkuanMiLCJnb29nbGVfYXV0aC5qcyIsInByb2ZpbGUuanMiXSwibmFtZXMiOlsiYm9hcmQiLCJvbkNsaWNrIiwiJGNlbGwiLCIkIiwidGhpcyIsInR5cGUiLCJhdHRyIiwiJHNlbGVjdGVkIiwiZ29vZ2xlX2FwaXMiLCJwbGF5ZXJfbW92ZSIsIm5ld19nYW1lIiwiJGJvYXJkIiwib24iLCIkYm9hcmRfaGVhZGVyIiwiaGlkZSIsImdhbWVfZW5kIiwiZ2FtZV9zdGF0ZSIsImFwcGVuZCIsImFkZENsYXNzIiwib2ZmIiwicmVtb3ZlQ2xhc3MiLCJlbXB0eV9ib2FyZCIsInRhYmxlX2J1aWxkZXIiLCJyb3ciLCJIRUlHSFQiLCJyb3dfYnVpbGRlciIsImNvbCIsIldJRFRIIiwibW92ZSIsIm9yaWdpbl92YWx1ZSIsIm9yaWdpbiIsImRlc3RpbmF0aW9uIiwiY2FwdHVyZXMiLCJvciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIkb3IiLCJ0eXBlTmFtZXMiLCJkZSIsIiRkZSIsImkiLCJsZW5ndGgiLCJmIiwidCIsImNvbnNvbGUiLCJsb2ciLCJjYSIsIiRjYSIsIm5ld19ib2FyZCIsImNvbHVtbldpZHRoIiwidmFsIiwiJG5ld19nYW1lIiwiZGlhbG9ncyIsIm9wZW5Ib3ciLCJob3dfZGlhbG9nIiwic2hvd01vZGFsIiwib3Blbkhpc3RvcnkiLCJoaXN0b3J5X2RpYWxvZyIsIm9wZW5BYm91dCIsImFib3V0X2RpYWxvZyIsImNsb3NlSG93IiwiY2xvc2UiLCJjbG9zZUhpc3RvcnkiLCJjbG9zZUFib3V0IiwiJGhvdyIsIiRoaXN0b3J5IiwiJGFib3V0IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJnYXBpIiwiY2xpZW50IiwiaG5lZmF0YWZsIiwiZXhlY3V0ZSIsInJlc3BvbnNlIiwiS0VZIiwia2V5IiwiSlNPTiIsInBhcnNlIiwiYWlfbW92ZSIsImxhc3RfcGxheWVyX2dhbWUiLCJjb2RlIiwic3RhdGUiLCJwYXJzZUludCIsIm9yaWdpbnMiLCJzcGxpdCIsImRlc3RpbmF0aW9ucyIsImdhbWVfa2V5Iiwib3JpZ2luX3JvdyIsIm9yaWdpbl9jb2x1bW4iLCJkZXN0aW5hdGlvbl9yb3ciLCJkZXN0aW5hdGlvbl9jb2x1bW4iLCJyZXBsYWNlIiwiZ29vZ2xlX2F1dGgiLCJsb2FkTW9kdWxlcyIsImxvYWQiLCJhZnRlckxvYWRlZCIsInVybCIsInNpZ25pbiIsImltbWVkaWF0ZSIsInNldFRpbWVvdXQiLCJwcm9maWxlIiwiZW5hYmxlTG9naW4iLCJhdXRoIiwiYXV0aG9yaXplIiwiY2xpZW50X2lkIiwic2NvcGUiLCJ1c2VyQXV0aGVkIiwiaXNBdXRoZWQiLCJzaWduZWRpbiIsIm1vZGUiLCJvYXV0aDIiLCJ1c2VyaW5mbyIsImdldCIsInJlc3AiLCJzZXRMb2dnZWRJbiIsInBpY3R1cmUiLCJuYW1lIiwiJGxvZ2luIiwiX2xvZ2luQ2xpY2siLCJzcmMiLCIkbmFtZSIsImh0bWwiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLE9BQUEsV0FvQkEsUUFBQUMsS0FDQSxHQUFBQyxHQUFBQyxFQUFBQyxNQUNBQyxFQUFBSCxFQUFBSSxLQUFBLFFBRUEsYUFBQUQsRUFDQUUsR0FDQUEsRUFBQUQsS0FBQSxRQUFBLFlBQ0FDLEVBQUEsT0FHQUwsRUFBQUksS0FBQSxRQUFBLG1CQUNBQyxFQUFBTCxHQUdBSyxJQUNBLFNBQUFGLEdBQ0FHLFlBQUFDLFlBQ0FGLEVBQUFELEtBQUEsTUFDQUosRUFBQUksS0FBQSxPQUVBQyxFQUFBLE9BR0FBLEVBQUFELEtBQUEsUUFBQSxZQUNBQyxFQUFBLE9BSUEsUUFBQUcsS0FDQUMsRUFBQUMsR0FBQSxRQUFBLG1CQUFBWCxHQUNBTyxZQUFBRSxXQUNBRyxFQUFBQyxPQU9BLFFBQUFDLEdBQUFDLEdBQ0EsTUFBQSxJQUFBQSxHQUFBLEdBQUFBLEdBQ0EsR0FBQUEsR0FDQUgsRUFBQUksT0FBQSxlQUNBSixFQUFBSyxTQUFBLHFCQUdBTCxFQUFB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dXJjZXNDb250ZW50IjpbInZhciBib2FyZCA9IChmdW5jdGlvbigpIHtcblxuICAgdmFyICRib2FyZCA9ICQoXCIjYm9hcmRcIik7XG4gICB2YXIgJGJvYXJkX2hlYWRlciA9ICQoXCIjYm9hcmRfaGVhZGVyXCIpO1xuICAgdmFyICRuZXdfZ2FtZSA9ICQoXCIjbmV3X2dhbWVcIik7XG5cbiAgIGNvbnN0IEhFSUdIVCA9IDk7XG4gICBjb25zdCBXSURUSCA9IDk7XG5cbiAgIHZhciBib2FyZDtcblxuICAgdmFyICRzZWxlY3RlZCA9IG51bGw7XG5cbiAgIGNvbnN0IHR5cGVOYW1lcyA9IFtcbiAgICAgICdlbXB0eScsXG4gICAgICAnYXR0YWNrZXInLFxuICAgICAgJ2RlZmVuZGVyJyxcbiAgICAgICdraW5nJ1xuICAgXTtcblxuICAgZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHZhciAkY2VsbCA9ICQodGhpcyk7XG4gICAgICB2YXIgdHlwZSA9ICRjZWxsLmF0dHIoJ2NsYXNzJyk7XG5cbiAgICAgIGlmKHR5cGUgPT0gXCJhdHRhY2tlclwiKSB7XG4gICAgICAgICBpZigkc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICRzZWxlY3RlZC5hdHRyKCdjbGFzcycsJ2F0dGFja2VyJyk7XG4gICAgICAgICAgICAkc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICAgfVxuICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkY2VsbC5hdHRyKCdjbGFzcycsJ2F0dGFja2VyLXNlbGVjdCcpO1xuICAgICAgICAgICAgJHNlbGVjdGVkID0gJGNlbGw7XG4gICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmKCRzZWxlY3RlZCl7XG4gICAgICAgICBpZih0eXBlID09IFwiZW1wdHlcIikge1xuICAgICAgICAgICAgZ29vZ2xlX2FwaXMucGxheWVyX21vdmUoXG4gICAgICAgICAgICAgICAkc2VsZWN0ZWQuYXR0cignaWQnKSxcbiAgICAgICAgICAgICAgICRjZWxsLmF0dHIoJ2lkJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAkc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICAgfVxuICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkc2VsZWN0ZWQuYXR0cignY2xhc3MnLCdhdHRhY2tlcicpO1xuICAgICAgICAgICAgJHNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cbiAgIGZ1bmN0aW9uIG5ld19nYW1lKCkge1xuICAgICAgICAgJGJvYXJkLm9uKCdjbGljaycsJy5yb3cgPiBkaXYgPiBkaXYnLCBvbkNsaWNrKTtcbiAgICAgIGdvb2dsZV9hcGlzLm5ld19nYW1lKCk7XG4gICAgICAkYm9hcmRfaGVhZGVyLmhpZGUoKTtcbiAgIH1cbiAgICRuZXdfZ2FtZS5vbignY2xpY2snLG5ld19nYW1lKTtcbiAgIGZ1bmN0aW9uIGNlbGxDbGljayh0YXJnZXQsIHBhcmFtcykge1xuXG4gICB9XG5cbiAgIGZ1bmN0aW9uIGdhbWVfZW5kKGdhbWVfc3RhdGUpIHtcbiAgICAgIGlmKGdhbWVfc3RhdGUgPT0gMiB8fCBnYW1lX3N0YXRlID09IDMpIHtcbiAgICAgICAgIGlmKGdhbWVfc3RhdGUgPT0gMil7XG4gICAgICAgICAgICAkYm9hcmRfaGVhZGVyLmFwcGVuZChcIlBsYXllciB3b24hXCIpO1xuICAgICAgICAgICAgJGJvYXJkX2hlYWRlci5hZGRDbGFzcyhcImF0dGFja2VyLWhlYWRlclwiKTtcbiAgICAgICAgIH1cbiAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICRib2FyZF9oZWFkZXIuYWRkQ2xhc3MoXCJkZWZlbmRlci1oZWFkZXJcIik7XG4gICAgICAgICAgICAgJGJvYXJkX2hlYWRlci5hcHBlbmQoXCJBSSB3b24hXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICRib2FyZC5vZmYoKTtcbiAgICAgICAgICRib2FyZF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIGVtcHR5X2JvYXJkKCkge1xuXG4gICAgICAkYm9hcmQgPSAkKFwiI2JvYXJkXCIpO1xuICAgICAgdmFyIHRhYmxlX2J1aWxkZXIgPSBcIlwiO1xuICAgXHRmb3IodmFyIHJvdz0wOyByb3c8IEhFSUdIVDsgcm93Kyspe1xuICAgICAgICAgdmFyIHJvd19idWlsZGVyID0gXCI8ZGl2IGNsYXNzPSdyb3cnPlwiO1xuICAgXHRcdGZvcih2YXIgY29sPTA7IGNvbDwgV0lEVEg7IGNvbCsrKSB7XG4gICAgICAgICAgICByb3dfYnVpbGRlciArPSBcIjxkaXY+PGRpdiBkYXRhLXZhbD0nMCcgY2xhc3M9J2VtcHR5JyBpZD0nXCIgKyByb3cgKyBcIixcIiArIGNvbCArIFwiJz48L2Rpdj48L2Rpdj5cIjtcbiAgIFx0XHR9XG4gICAgICAgICByb3dfYnVpbGRlciArPSBcIjwvZGl2PlwiO1xuXG4gICAgICAgICB0YWJsZV9idWlsZGVyICs9IHJvd19idWlsZGVyO1xuICAgXHR9XG5cbiAgICAgICRib2FyZC5hcHBlbmQodGFibGVfYnVpbGRlcik7XG5cbiAgICAgICRib2FyZC5vbignY2xpY2snLCcucm93ID4gZGl2ID4gZGl2Jywgb25DbGljayk7XG5cbiAgIH1cblxuICAgZnVuY3Rpb24gZmFkZUluTmV3Q2xhc3Moc291cmNlLCBmcm9tX2NsYXNzLCB0b19jbGFzcykge1xuICAgICAgc291cmNlLnN3aXRjaENsYXNzKGZyb21fY2xhc3MsIHRvX2NsYXNzLCAxMDAwKTtcbiAgIH1cblxuICAgZnVuY3Rpb24gbW92ZShvcmlnaW5fdmFsdWUsIG9yaWdpbiwgZGVzdGluYXRpb24sIGNhcHR1cmVzKSB7XG4gICAgICB2YXIgb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcmlnaW4pO1xuICAgICAgdmFyICRvciA9ICQob3IpO1xuICAgICAgJG9yLmF0dHIoJ2NsYXNzJyx0eXBlTmFtZXNbMF0pO1xuXG4gICAgICB2YXIgZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZXN0aW5hdGlvbik7XG4gICAgICB2YXIgJGRlID0gJChkZSk7XG4gICAgICAkZGUuYXR0cignY2xhc3MnLHR5cGVOYW1lc1tvcmlnaW5fdmFsdWVdKTtcblxuICAgICAgaWYoY2FwdHVyZXMgJiYgY2FwdHVyZXNbMF0pIHtcblxuICAgICAgICAgZm9yKHZhciBpPTA7IGk8IGNhcHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmID0gY2FwdHVyZXNbaV1bMF07XG4gICAgICAgICAgICB0ID0gY2FwdHVyZXNbaV1bMV07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmKTtcbiAgICAgICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGYgKyBcIixcIiArIHQpO1xuICAgICAgICAgICAgdmFyICRjYSA9ICQoY2EpO1xuICAgICAgICAgICAgJGNhLmF0dHIoJ2NsYXNzJyx0eXBlTmFtZXNbMF0pO1xuICAgICAgICAgfVxuICAgICAgfVxuICAgfVxuXG4gICBmdW5jdGlvbiBuZXdfYm9hcmQoYm9hcmQpIHtcbiAgICAgIGJvYXJkID0gYm9hcmQ7XG4gICBcdGZvcih2YXIgcm93PTA7IHJvdyA8IGJvYXJkLmxlbmd0aDsgcm93Kyspe1xuICAgICAgICAgdmFyIGNvbHVtbldpZHRoID0gYm9hcmRbcm93XS5sZW5ndGg7XG4gICBcdFx0Zm9yKHZhciBjb2w9MDsgY29sIDwgY29sdW1uV2lkdGg7IGNvbCsrKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gYm9hcmRbcm93XVtjb2xdO1xuXG4gICAgICAgICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJvdyArIFwiLFwiICsgY29sKTtcblxuICAgICAgICAgICAgICAgdmFyICRjZWxsID0gJCh0KTtcblxuICAgICAgICAgICAgICAgJGNlbGwuYXR0cignY2xhc3MnLHR5cGVOYW1lc1t2YWxdKTtcblxuICAgXHRcdH1cbiAgIFx0fVxuXG4gICB9XG5cbiAgIGZ1bmN0aW9uIG1ha2VfbW92ZShmcm9tX3IsIGZyb21fYywgdG9fciwgdG9fYywgY2FwdHVyZXMsIHZhbHVlKSB7XG5cbiAgICAgIGJvYXJkW2Zyb21fcl1bZnJvbV9jXSA9IDA7XG4gICAgICBib2FyZFt0b19yXVt0b19jXSA9IHZhbHVlO1xuICAgICAgJChcIiNcIiArIGZyb21fciArIFwiLFwiICsgZnJvbV9jKS5hdHRyKCdjbGFzcycsJ2VtcHR5Jyk7XG4gICAgICAkKFwiI1wiICsgdG9fciArIFwiLFwiICsgdG9fYykuYXR0cignY2xhc3MnLHR5cGVOYW1lc1t2YWx1ZV0pO1xuICAgICAgZm9yKHZhciBjYXB0dXJlIGluIGNhcHR1cmVzKSB7XG4gICAgICAgICB2YXIgciA9IGNhcHR1cmVbMF07XG4gICAgICAgICB2YXIgYyA9IGNhcHR1cmVbMV07XG4gICAgICAgICBib2FyZFtyXVtjXSA9IDA7XG4gICAgICAgICAkKFwiI1wiICsgciArIFwiLFwiICsgYykuYXR0cignY2xhc3MnLCdlbXB0eScpO1xuICAgICAgfVxuXG4gICB9XG5cbiAgIHJldHVybiB7XG4gICAgICBlbXB0eV9ib2FyZDogZW1wdHlfYm9hcmQsXG4gICAgICBuZXdfYm9hcmQ6IG5ld19ib2FyZCxcbiAgICAgIG1vdmU6IG1vdmUsXG4gICAgICBnYW1lX2VuZDogZ2FtZV9lbmRcbiAgIH07XG59KSgpO1xuIiwidmFyIGRpYWxvZ3MgPSAoZnVuY3Rpb24oKXtcblxuICAgdmFyICRob3cgPSAkKFwiI2hvd1wiKTtcbiAgIHZhciAkaGlzdG9yeSA9ICQoXCIjaGlzdG9yeVwiKTtcbiAgIHZhciAkYWJvdXQgPSAkKFwiI2Fib3V0XCIpO1xuXG4gICB2YXIgaG93X2RpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3ctZGlhbG9nJyk7XG4gICB2YXIgaGlzdG9yeV9kaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzdG9yeS1kaWFsb2cnKTtcbiAgIHZhciBhYm91dF9kaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWJvdXQtZGlhbG9nJyk7XG5cbiAgIGZ1bmN0aW9uIG9wZW5Ib3coKXtcbiAgICAgIGhvd19kaWFsb2cuc2hvd01vZGFsKCk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIG9wZW5IaXN0b3J5KCkge1xuICAgICAgaGlzdG9yeV9kaWFsb2cuc2hvd01vZGFsKCk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIG9wZW5BYm91dCgpIHtcbiAgICAgIGFib3V0X2RpYWxvZy5zaG93TW9kYWwoKTtcbiAgIH1cblxuICAgZnVuY3Rpb24gY2xvc2VIb3coKSB7XG4gICAgICBob3dfZGlhbG9nLmNsb3NlKCk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIGNsb3NlSGlzdG9yeSgpIHtcbiAgICAgIGhpc3RvcnlfZGlhbG9nLmNsb3NlKCk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIGNsb3NlQWJvdXQoKSB7XG4gICAgICBhYm91dF9kaWFsb2cuY2xvc2UoKTtcbiAgIH1cblxuICAgJGhvdy5vbignY2xpY2snLCBvcGVuSG93KTtcbiAgICRoaXN0b3J5Lm9uKCdjbGljaycsIG9wZW5IaXN0b3J5KTtcbiAgICRhYm91dC5vbignY2xpY2snLCBvcGVuQWJvdXQpO1xuXG4gICBob3dfZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VIb3cpO1xuICAgaGlzdG9yeV9kaWFsb2cucXVlcnlTZWxlY3RvcignLmNsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUhpc3RvcnkpO1xuICAgYWJvdXRfZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VBYm91dCk7XG5cbn0pKCk7XG4iLCJ2YXIgZ29vZ2xlX2FwaXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgIHZhciBLRVkgPSBudWxsO1xuXG4gICBmdW5jdGlvbiBuZXdfZ2FtZSgpIHtcbiAgICAgIGdhcGkuY2xpZW50LmhuZWZhdGFmbC5uZXdfZ2FtZSgpLmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgS0VZID0gcmVzcG9uc2Uua2V5O1xuICAgICAgICAgYm9hcmQubmV3X2JvYXJkKEpTT04ucGFyc2UocmVzcG9uc2UuYm9hcmQpKTtcbiAgICAgICAgIGFpX21vdmUoKTtcbiAgICAgIH0pO1xuICAgfVxuXG4gICBmdW5jdGlvbiBsYXN0X3BsYXllcl9nYW1lKCkge1xuXG4gICAgICBnYXBpLmNsaWVudC5obmVmYXRhZmwubGFzdF9wbGF5ZXJfZ2FtZSgpLmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSA0MDQpIHtcbiAgICAgICAgICAgIG5ld19nYW1lKCk7XG4gICAgICAgICB9XG4gICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIEtFWSA9IHJlc3BvbnNlLmtleTtcbiAgICAgICAgICAgIGJvYXJkLm5ld19ib2FyZChKU09OLnBhcnNlKHJlc3BvbnNlLmJvYXJkKSk7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBwYXJzZUludChyZXNwb25zZS5zdGF0ZSk7XG4gICAgICAgICAgICBpZighYm9hcmQuZ2FtZV9lbmQoc3RhdGUpKVxuICAgICAgICAgICAgICAgaWYoc3RhdGUgPT0gMSkgYWlfbW92ZSgpO1xuICAgICAgICAgfVxuICAgICAgfSk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIHBsYXllcl9tb3ZlKG9yaWdpbiwgZGVzdGluYXRpb24pIHtcbiAgICAgIHZhciBvcmlnaW5zID0gb3JpZ2luLnNwbGl0KCcsJyk7XG4gICAgICB2YXIgZGVzdGluYXRpb25zID0gZGVzdGluYXRpb24uc3BsaXQoJywnKTtcblxuICAgICAgZ2FwaS5jbGllbnQuaG5lZmF0YWZsLnBsYXllcl9tb3ZlKHtcbiAgICAgICAgIFwiZ2FtZV9rZXlcIjogS0VZLFxuICAgICAgICAgXCJvcmlnaW5fcm93XCI6IG9yaWdpbnNbMF0sXG4gICAgICAgICBcIm9yaWdpbl9jb2x1bW5cIjogb3JpZ2luc1sxXSxcbiAgICAgICAgIFwiZGVzdGluYXRpb25fcm93XCI6IGRlc3RpbmF0aW9uc1swXSxcbiAgICAgICAgIFwiZGVzdGluYXRpb25fY29sdW1uXCI6IGRlc3RpbmF0aW9uc1sxXVxuICAgICAgfSkuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICBib2FyZC5tb3ZlKFxuICAgICAgICAgICAgcmVzcG9uc2Uub3JpZ2luX3ZhbHVlLFxuICAgICAgICAgICAgcmVzcG9uc2Uub3JpZ2luLFxuICAgICAgICAgICAgcmVzcG9uc2UuZGVzdGluYXRpb24sXG4gICAgICAgICAgICByZXNwb25zZS5jYXB0dXJlcyAhPSBcIltdXCIgP1xuICAgICAgICAgICAgSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgIHJlc3BvbnNlLmNhcHR1cmVzLnJlcGxhY2UoJygnLCdbJykucmVwbGFjZSgnKScsJ10nKVxuICAgICAgICAgICAgKTogbnVsbFxuICAgICAgICAgKTtcbiAgICAgICAgIGlmKCFib2FyZC5nYW1lX2VuZChwYXJzZUludChyZXNwb25zZS5nYW1lX3N0YXRlKSkpIHtcbiAgICAgICAgICAgIGFpX21vdmUoKTtcbiAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgfVxuXG4gICAgICBmdW5jdGlvbiBhaV9tb3ZlKCkge1xuICAgICAgICAgZ2FwaS5jbGllbnQuaG5lZmF0YWZsLmFpX21vdmUoe1xuICAgICAgICAgICAgXCJnYW1lX2tleVwiOktFWVxuICAgICAgICAgfSkuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICBib2FyZC5tb3ZlKFxuICAgICAgICAgICAgICAgcmVzcG9uc2Uub3JpZ2luX3ZhbHVlLFxuICAgICAgICAgICAgICAgcmVzcG9uc2Uub3JpZ2luLFxuICAgICAgICAgICAgICAgcmVzcG9uc2UuZGVzdGluYXRpb24sXG4gICAgICAgICAgICAgICByZXNwb25zZS5jYXB0dXJlcyAhPSBcIltdXCIgP1xuICAgICAgICAgICAgICAgSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNhcHR1cmVzLnJlcGxhY2UoJygnLCdbJykucmVwbGFjZSgnKScsJ10nKVxuICAgICAgICAgICAgICAgKTogbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJvYXJkLmdhbWVfZW5kKHBhcnNlSW50KHJlc3BvbnNlLmdhbWVfc3RhdGUpKTtcbiAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgIG5ld19nYW1lOiBuZXdfZ2FtZSxcbiAgICAgICAgIHBsYXllcl9tb3ZlOiBwbGF5ZXJfbW92ZSxcbiAgICAgICAgIGFpX21vdmU6IGFpX21vdmUsXG4gICAgICAgICBsYXN0X3BsYXllcl9nYW1lOiBsYXN0X3BsYXllcl9nYW1lXG4gICAgICB9O1xufSkoKTtcbiIsInZhciBnb29nbGVfYXV0aCA9IChmdW5jdGlvbigpe1xuXG4gICBjb25zdCB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9fYWgvYXBpXCI7XG4gICB2YXIgc2lnbmVkaW4gPSBmYWxzZTtcblxuICAgZnVuY3Rpb24gbG9hZE1vZHVsZXMoKXtcbiAgICAgIGdhcGkuY2xpZW50LmxvYWQoXG4gICAgICAgICAnb2F1dGgyJyxcbiAgICAgICAgICd2MidcbiAgICAgICk7XG4gICAgICBnYXBpLmNsaWVudC5sb2FkKFxuICAgICAgICAgJ2huZWZhdGFmbCcsXG4gICAgICAgICAndjEnLFxuICAgICAgICAgYWZ0ZXJMb2FkZWQsXG4gICAgICAgICB1cmxcbiAgICAgICk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIGFmdGVyTG9hZGVkKCkge1xuICAgICAgc2lnbmluKGltbWVkaWF0ZSA9IHRydWUpO1xuICAgICAgc2V0VGltZW91dChwcm9maWxlLmVuYWJsZUxvZ2luKCksIDIwMDApO1xuXG4gICB9XG5cbiAgIGZ1bmN0aW9uIHNpZ25pbihpbW1lZGlhdGUpIHtcbiAgICAgIGdhcGkuYXV0aC5hdXRob3JpemUoe1xuICAgICAgICAgY2xpZW50X2lkOiAnMzE0MjcyMTYwMjUwLXVjcnFnNDRjMW9qOWtubHJmYXRxdnFmMWIzcG05ODE5LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tJyxcbiAgICAgICAgIHNjb3BlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC91c2VyaW5mby5lbWFpbCcsXG4gICAgICAgICBpbW1lZGlhdGU6IGltbWVkaWF0ZVxuICAgICAgfSwgdXNlckF1dGhlZCk7XG4gICB9XG5cbiAgIGZ1bmN0aW9uIGlzQXV0aGVkKCkge1xuICAgICAgcmV0dXJuIHNpZ25lZGluO1xuICAgfVxuXG4gICBmdW5jdGlvbiB1c2VyQXV0aGVkKG1vZGUpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQub2F1dGgyLnVzZXJpbmZvLmdldCgpLmV4ZWN1dGUoZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgaWYgKCFyZXNwLmNvZGUpIHtcbiAgICAgICAgICAgIHByb2ZpbGUuc2V0TG9nZ2VkSW4ocmVzcC5waWN0dXJlLCByZXNwLm5hbWUpO1xuICAgICAgICAgICAgc2lnbmVkaW4gPSB0cnVlO1xuICAgICAgICAgICAgLy9nb29nbGVfYXBpcy5uZXdfZ2FtZShnb29nbGVfYXBpcy5haV9tb3ZlKTtcbiAgICAgICAgICAgIGdvb2dsZV9hcGlzLmxhc3RfcGxheWVyX2dhbWUoKTtcbiAgICAgICAgIC8vICAgZ29vZ2xlX2FwaXMuYWlfbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgfSk7XG4gICB9XG4gICByZXR1cm4ge1xuICAgICAgbG9hZE1vZHVsZXM6IGxvYWRNb2R1bGVzLFxuICAgICAgaXNBdXRoZWQ6IGlzQXV0aGVkLFxuICAgICAgc2lnbmluOiBzaWduaW5cbiAgIH07XG5cbn0pKCk7XG4iLCJ2YXIgcHJvZmlsZSA9IChmdW5jdGlvbigpIHtcbiAgIHZhciAkbG9naW4gPSAkKFwiI2xvZ2luXCIpO1xuICAgLy92YXIgJHBpY3R1cmUgPSAkKFwiI3BpY3R1cmVcIik7XG4gICB2YXIgJG5hbWUgPSAkKFwiI25hbWVcIik7XG5cbiAgIGZ1bmN0aW9uIGVuYWJsZUxvZ2luKCkge1xuICAgICAgJGxvZ2luLm9uKCdjbGljaycsIF9sb2dpbkNsaWNrKTtcbiAgICAgIGNvbnNvbGUubG9nKCdlbmFibGVkJyk7XG4gICAgICAkbG9naW4ucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG4gICB9XG4gICBmdW5jdGlvbiBfbG9naW5DbGljaygpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjbGlrJyk7XG4gICAgICBnb29nbGVfYXV0aC5zaWduaW4oaW1tZWRpYXRlID0gZmFsc2UpO1xuICAgfVxuICAgZnVuY3Rpb24gX2xvZ291dENsaWNrKCkge1xuICAgICAgLy9zaW5naW4oaW1tZWRpYXRlID0gZmFsc2UpO1xuICAgfVxuICAgZnVuY3Rpb24gc2V0TG9nZ2VkSW4oc3JjLCBuYW1lKSB7XG4gICAgICBjb25zb2xlLmxvZyhuYW1lKTtcbiAgIC8vICAgZW5hYmxlTG9naW4oKTtcbiAgIC8vICAgJHBpY3R1cmUuYXR0cignc3JjJywgc3JjKTtcbiAgICAgJG5hbWUuaHRtbChuYW1lKTtcbiAgICAgICAgJG5hbWUucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgICAkbG9naW4uYWRkQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAvLyAgICRidG4uYWRkQ2xhc3MoXCJhbGVydFwiKTtcbiAgIC8vLy8gICAkYnRuLm9mZignY2xpY2snKTtcbiAgIC8vICAgJGJ0bi5vbignY2xpY2snLCBfbG9nb3V0Q2xpY2spO1xuICAgfVxuICAgcmV0dXJuIHtcbiAgICAgIGVuYWJsZUxvZ2luOiBlbmFibGVMb2dpbixcbiAgICAgIHNldExvZ2dlZEluOiBzZXRMb2dnZWRJblxuICAgfTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
